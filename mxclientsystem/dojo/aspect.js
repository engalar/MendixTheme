define([],(function(){"use strict";function e(e){return function(r,n,t,i){var a,u=r[n];u&&u.target==r||(r[n]=a=function(){for(var e=a.nextId,r=arguments,n=a.before;n;)n.advice&&(r=n.advice.apply(this,r)||r),n=n.next;if(a.around)var t=a.around.advice(this,r);for(var i=a.after;i&&i.id<e;){if(i.advice)if(i.receiveArguments){var u=i.advice.apply(this,r);t=void 0===u?t:u}else t=i.advice.call(this,t,r);i=i.next}return t},u&&(a.around={advice:function(e,r){return u.apply(e,r)}}),a.target=r,a.nextId=a.nextId||0);var v=function(e,r,n,t){var i,a=e[r],u="around"==r;if(u){var v=n((function(){return a.advice(this,arguments)}));i={remove:function(){v&&(v=e=n=null)},advice:function(e,r){return v?v.apply(e,r):a.advice(e,r)}}}else i={remove:function(){if(i.advice){var t=i.previous,a=i.next;a||t?(t?t.next=a:e[r]=a,a&&(a.previous=t)):delete e[r],e=n=i.advice=null}},id:e.nextId++,advice:n,receiveArguments:t};if(a&&!u)if("after"==r){for(;a.next&&(a=a.next););a.next=i,i.previous=a}else"before"==r&&(e[r]=i,i.next=a,a.previous=i);else e[r]=i;return i}(a||u,e,t,i);return t=null,v}}var r=e("after");return{before:e("before"),around:e("around"),after:r}}));