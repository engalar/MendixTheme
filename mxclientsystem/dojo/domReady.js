define(["./global","./has"],(function(t,e){var n,a=document,o={loaded:1,complete:1},r="string"!=typeof a.readyState,c=!!o[a.readyState],i=[];function d(t){i.push(t),c&&f()}function f(){if(!n){for(n=!0;i.length;)try{i.shift()(a)}catch(t){console.error(t,"in domReady callback",t.stack)}n=!1,d._onQEmpty()}}if(d.load=function(t,e,n){d(n)},d._Q=i,d._onQEmpty=function(){},r&&(a.readyState="loading"),!c){var l=[],u=function(e){e=e||t.event,c||"readystatechange"==e.type&&!o[a.readyState]||(r&&(a.readyState="complete"),c=1,f())},h=function(t,e){t.addEventListener(e,u,!1),i.push((function(){t.removeEventListener(e,u,!1)}))};if(!e("dom-addeventlistener")){h=function(t,e){e="on"+e,t.attachEvent(e,u),i.push((function(){t.detachEvent(e,u)}))};var s=a.createElement("div");try{s.doScroll&&null===t.frameElement&&l.push((function(){try{return s.doScroll("left"),1}catch(t){}}))}catch(t){}}if(h(a,"DOMContentLoaded"),h(t,"load"),"onreadystatechange"in a?h(a,"readystatechange"):r||l.push((function(){return o[a.readyState]})),l.length){var y=function(){if(!c){for(var t=l.length;t--;)if(l[t]())return void u("poller");setTimeout(y,30)}};y()}}return d}));