define(["./_base/lang","./sniff","./_base/window","./dom","./dom-geometry","./dom-style","./dom-construct"],(function(t,e,i,o,n,r,l){e.add("rtl-adjust-position-for-verticalScrollBar",(function(t,e){var o=i.body(e),r=l.create("div",{style:{overflow:"scroll",overflowX:"visible",direction:"rtl",visibility:"hidden",position:"absolute",left:"0",top:"0",width:"64px",height:"64px"}},o,"last"),d=l.create("div",{style:{overflow:"hidden",direction:"ltr"}},r,"last"),c=0!=n.position(d).x;return r.removeChild(d),o.removeChild(r),c})),e.add("position-fixed-support",(function(t,e){var o=i.body(e),r=l.create("span",{style:{visibility:"hidden",position:"fixed",left:"1px",top:"1px"}},o,"last"),d=l.create("span",{style:{position:"fixed",left:"0",top:"0"}},r,"last"),c=n.position(d).x!=n.position(r).x;return r.removeChild(d),o.removeChild(r),c}));var d={getBox:function(t){var o,r,l="BackCompat"==(t=t||i.doc).compatMode?i.body(t):t.documentElement,c=n.docScroll(t);if(e("touch")){var a=d.get(t);o=a.innerWidth||l.clientWidth,r=a.innerHeight||l.clientHeight}else o=l.clientWidth,r=l.clientHeight;return{l:c.x,t:c.y,w:o,h:r}},get:function(t){if(e("ie")&&d!==document.parentWindow){t.parentWindow.execScript("document._parentWindow = window;","Javascript");var i=t._parentWindow;return t._parentWindow=null,i}return t.parentWindow||t.defaultView},scrollIntoView:function(t,l){try{var d=(t=o.byId(t)).ownerDocument||i.doc,c=i.body(d),a=d.documentElement||c.parentNode,s=e("ie")||e("trident"),h=e("webkit");if(t==c||t==a)return;if(!(e("mozilla")||s||h||e("opera")||e("trident")||e("edge"))&&"scrollIntoView"in t)return void t.scrollIntoView(!1);var p="BackCompat"==d.compatMode,f=Math.min(c.clientWidth||a.clientWidth,a.clientWidth||c.clientWidth),w=Math.min(c.clientHeight||a.clientHeight,a.clientHeight||c.clientHeight),u=h||p?c:a,m=l||n.position(t),x=t.parentNode,v=function(t){return!(s<=6||7==s&&p)&&e("position-fixed-support")&&"fixed"==r.get(t,"position").toLowerCase()},y=this,g=function(t,e,i){"BODY"==t.tagName||"HTML"==t.tagName?y.get(t.ownerDocument).scrollBy(e,i):(e&&(t.scrollLeft+=e),i&&(t.scrollTop+=i))};if(v(t))return;for(;x;){x==c&&(x=u);var W=n.position(x),b=v(x),H="rtl"==r.getComputedStyle(x).direction.toLowerCase();if(x==u)W.w=f,W.h=w,u==a&&(s||e("trident"))&&H&&(W.x+=u.offsetWidth-W.w),W.x=0,W.y=0;else{var C=n.getPadBorderExtents(x);W.w-=C.w,W.h-=C.h,W.x+=C.l,W.y+=C.t;var B=x.clientWidth,M=W.w-B;B>0&&M>0&&(H&&e("rtl-adjust-position-for-verticalScrollBar")&&(W.x+=M),W.w=B),B=x.clientHeight,M=W.h-B,B>0&&M>0&&(W.h=B)}b&&(W.y<0&&(W.h+=W.y,W.y=0),W.x<0&&(W.w+=W.x,W.x=0),W.y+W.h>w&&(W.h=w-W.y),W.x+W.w>f&&(W.w=f-W.x));var L,I,V=m.x-W.x,j=m.y-W.y,N=V+m.w-W.w,S=j+m.h-W.h;N*V>0&&(x.scrollLeft||x==u||x.scrollWidth>x.offsetHeight)&&(L=Math[V<0?"max":"min"](V,N),H&&(8==s&&!p||e("trident")>=5)&&(L=-L),I=x.scrollLeft,g(x,L,0),L=x.scrollLeft-I,m.x-=L),S*j>0&&(x.scrollTop||x==u||x.scrollHeight>x.offsetHeight)&&(L=Math.ceil(Math[j<0?"max":"min"](j,S)),I=x.scrollTop,g(x,0,L),L=x.scrollTop-I,m.y-=L),x=x!=u&&!b&&x.parentNode}}catch(e){console.error("scrollIntoView: "+e),t.scrollIntoView(!1)}}};return e("extend-dojo")&&t.setObject("dojo.window",d),d}));