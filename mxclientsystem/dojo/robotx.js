define(["require","doh/main","./aspect","./dom-construct","./dom-style","./_base/kernel","./_base/lang","./on","./robot","./sniff","./_base/window"],(function(e,o,n,t,i,d,r,c,u,a,m){d.experimental("dojo.robotx");var s,l=null;function b(){u._updateDocument(),l.contentWindow.require?l.contentWindow.require(["dojo/ready"],(function(e){e(1/0,(function(){setTimeout((function(){s.resolve(!0)}),500)}))})):s.resolve(!0)}return r.mixin(u,{_updateDocument:function(){d.setContext(l.contentWindow,l.contentWindow.document),u.window=l.contentWindow,u.doc=l.contentWindow.document;var e=d.global;e.dojo&&(d.publish=e.dojo.publish,d.subscribe=e.dojo.subscribe,d.connectPublisher=e.dojo.connectPublisher)},initRobot:function(n){o.registerGroup("initialize robot",{name:"load "+n,timeout:1e5,runTest:function(){return s=new o.Deferred,function(o){e(["./domReady!"],(function(){var e={overflow:"hidden",margin:"0px",borderWidth:"0px",height:"100%",width:"100%"};i.set(document.documentElement,e),i.set(document.body,e),(l=document.createElement("iframe")).setAttribute("ALLOWTRANSPARENCY","true"),l.scrolling=a("ie")?"yes":"auto","BackCompat"==document.compatMode?document.body:document.documentElement,i.set(l,{border:"0px none",padding:"0px",margin:"0px",width:"100%",height:"100%"}),l.src=o,void 0!==l.attachEvent?l.attachEvent("onload",b):c(l,"load",b),t.place(l,m.body(),"first")}))}(n),s}})},waitForPageToLoad:function(e){return s=new o.Deferred,e(),s}}),u}));