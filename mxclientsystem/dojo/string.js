define(["./_base/kernel","./_base/lang"],(function(t,r){var n=/[&<>'"\/]/g,e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"},o={};return r.setObject("dojo.string",o),o.escape=function(t){return t?t.replace(n,(function(t){return e[t]})):""},o.codePointAt=String.prototype.codePointAt?function(t,r){return String.prototype.codePointAt.call(t,r)}:function(t,r){if(null==t)throw new TypeError("codePointAt called on null or undefined");var n,e,o,i;if(n=(t=String(t)).length,(i=r?Number(r):0)!=i&&(i=0),!(i<0||i>=n))return(e=t.charCodeAt(i))>=55296&&e<=56319&&n>i+1&&(o=t.charCodeAt(i+1))>=56320&&o<=57343?1024*(e-55296)+o-56320+65536:e},o.fromCodePoint=String.fromCodePoint||function(){var t,r,n=[],e=0,o="";for(r=0,len=arguments.length;r!==len;++r){if(!((t=+arguments[r])<1114111&&t>>>0===t))throw RangeError("Invalid code point: "+t);t<=65535?e=n.push(t):(t-=65536,e=n.push(55296+(t>>10),t%1024+56320)),e>=16383&&(o+=String.fromCharCode.apply(null,n),n.length=0)}return o+String.fromCharCode.apply(null,n)},o.rep=function(t,r){if(r<=0||!t)return"";for(var n=[];1&r&&n.push(t),r>>=1;)t+=t;return n.join("")},o.pad=function(t,r,n,e){n||(n="0");var i=String(t),u=o.rep(n,Math.ceil((r-i.length)/n.length));return e?i+u:u+i},o.substitute=function(n,e,o,i){return i=i||t.global,o=o?r.hitch(i,o):function(t){return t},n.replace(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,(function(t,n,u){if(""==n)return"$";var l=r.getObject(n,!1,e);u&&(l=r.getObject(u,!1,i).call(i,l,n));var a=o(l,n);if(void 0===a)throw new Error('string.substitute could not find key "'+n+'" in template');return a.toString()}))},o.trim=String.prototype.trim?r.trim:function(t){for(var r=(t=t.replace(/^\s+/,"")).length-1;r>=0;r--)if(/\S/.test(t.charAt(r))){t=t.substring(0,r+1);break}return t},o}));