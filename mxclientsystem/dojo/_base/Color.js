define(["./kernel","./lang","./array","./config"],(function(r,n,t,o){var a=r.Color=function(r){r&&this.setColor(r)};return a.named={black:[0,0,0],silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255],transparent:o.transparentColor||[0,0,0,0]},n.extend(a,{r:255,g:255,b:255,a:1,_set:function(r,n,t,o){var a=this;a.r=r,a.g=n,a.b=t,a.a=o},setColor:function(r){return n.isString(r)?a.fromString(r,this):n.isArray(r)?a.fromArray(r,this):(this._set(r.r,r.g,r.b,r.a),r instanceof a||this.sanitize()),this},sanitize:function(){return this},toRgb:function(){var r=this;return[r.r,r.g,r.b]},toRgba:function(){var r=this;return[r.r,r.g,r.b,r.a]},toHex:function(){return"#"+t.map(["r","g","b"],(function(r){var n=this[r].toString(16);return n.length<2?"0"+n:n}),this).join("")},toCss:function(r){var n=this,t=n.r+", "+n.g+", "+n.b;return(r?"rgba("+t+", "+n.a:"rgb("+t)+")"},toString:function(){return this.toCss(!0)}}),a.blendColors=r.blendColors=function(r,n,t,o){var e=o||new a;return e.r=Math.round(r.r+(n.r-r.r)*t),e.g=Math.round(r.g+(n.g-r.g)*t),e.b=Math.round(r.b+(n.b-r.b)*t),e.a=r.a+(n.a-r.a)*t,e.sanitize()},a.fromRgb=r.colorFromRgb=function(r,n){var t=r.toLowerCase().match(/^rgba?\(([\s\.,0-9]+)\)/);return t&&a.fromArray(t[1].split(/\s*,\s*/),n)},a.fromHex=r.colorFromHex=function(r,n){var o=n||new a,e=4==r.length?4:8,i=(1<<e)-1;return r=Number("0x"+r.substr(1)),isNaN(r)?null:(t.forEach(["b","g","r"],(function(n){var t=r&i;r>>=e,o[n]=4==e?17*t:t})),o.a=1,o)},a.fromArray=r.colorFromArray=function(r,n){var t=n||new a;return t._set(Number(r[0]),Number(r[1]),Number(r[2]),Number(r[3])),isNaN(t.a)&&(t.a=1),t.sanitize()},a.fromString=r.colorFromString=function(r,n){var t=a.named[r];return t&&a.fromArray(t,n)||a.fromRgb(r,n)||a.fromHex(r,n)},a}));