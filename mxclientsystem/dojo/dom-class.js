define(["./_base/lang","./_base/array","./dom"],(function(e,n,r){var t,i="className",a=/\s+/,o=[""];function f(e){if("string"==typeof e||e instanceof String){if(e&&!a.test(e))return o[0]=e,o;var r=e.split(a);return r.length&&!r[0]&&r.shift(),r.length&&!r[r.length-1]&&r.pop(),r}return e?n.filter(e,(function(e){return e})):[]}var d={};return t={contains:function(e,n){return(" "+r.byId(e)[i]+" ").indexOf(" "+n+" ")>=0},add:function(e,n){e=r.byId(e),n=f(n);var t,a=e[i];t=(a=a?" "+a+" ":" ").length;for(var o,d=0,l=n.length;d<l;++d)(o=n[d])&&a.indexOf(" "+o+" ")<0&&(a+=o+" ");t<a.length&&(e[i]=a.substr(1,a.length-2))},remove:function(n,t){var a;if(n=r.byId(n),void 0!==t){t=f(t),a=" "+n[i]+" ";for(var o=0,d=t.length;o<d;++o)a=a.replace(" "+t[o]+" "," ");a=e.trim(a)}else a="";n[i]!=a&&(n[i]=a)},replace:function(e,n,a){e=r.byId(e),d[i]=e[i],t.remove(d,a),t.add(d,n),e[i]!==d[i]&&(e[i]=d[i])},toggle:function(e,n,i){if(e=r.byId(e),void 0===i)for(var a,o=0,d=(n=f(n)).length;o<d;++o)a=n[o],t[t.contains(e,a)?"remove":"add"](e,a);else t[i?"add":"remove"](e,n);return i}}}));